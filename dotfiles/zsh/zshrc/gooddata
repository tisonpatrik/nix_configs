# GoodData/Work specific configuration

# SDKMAN configuration (MUST BE AT THE END OF LOADING ORDER)
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

# Work environment variables
export COMPOSE_PROFILES=ai

# AWS and infrastructure aliases
alias awslog='aws sso login --profile infra1 && aws --profile infra1 ecr get-login-password | docker login --username AWS --password-stdin 020413372491.dkr.ecr.us-east-1.amazonaws.com'
alias prepare_to_develop='aws sso login --profile infra1 && aws --profile infra1 ecr get-login-password | docker login --username AWS --password-stdin 020413372491.dkr.ecr.us-east-1.amazonaws.com && renew_code_artifact'

# CodeArtifact authentication function
function renew_code_artifact {
    export CODEARTIFACT_AUTH_TOKEN="$(aws codeartifact get-authorization-token --profile infra1 --domain infra1 --domain-owner 020413372491 --region us-east-1 --query authorizationToken --output text)"
    echo $CODEARTIFACT_AUTH_TOKEN | tee ~/.gradle/.codeartifact-token
} 